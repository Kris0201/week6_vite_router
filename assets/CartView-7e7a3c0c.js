import{_ as y,r as p,o as d,c as i,a as e,F as h,h as g,i as V,t as r,b as n,w as I,d as C,e as k,j as E,n as m}from"./index-d92b34dd.js";const{VITE_URL:b,VITE_PATH:f}={VITE_URL:"https://vue3-course-api.hexschool.io/",VITE_PATH:"kris-api",VITE_TEXT:"正式環境",BASE_URL:"/week6_vite_router/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},S={data(){return{products:[],productId:"",cart:{},loadingItem:"",user:{name:"",email:"",tel:"",address:"",message:""}}},methods:{getCarts(){this.$http.get(`${b}/v2/api/${f}/cart`).then(a=>{console.log("購物車",a.data),this.cart=a.data.data})},updateCartItem(a){const o={product_id:a.product.id,qty:a.qty};this.loadingItem=a.id,this.$http.put(`${b}/v2/api/${f}/cart/${a.id}`,{data:o}).then(v=>{console.log("更新購物車",v.data),this.getCarts(),this.loadingItem=""})},deleteCartItem(a){this.loadingItem=a.id,this.$http.delete(`${b}/v2/api/${f}/cart/${a.id}`).then(o=>{console.log("刪除購物車品項",o.data),this.getCarts(),this.loadingItem=""})},onSubmit(){console.log("onSubmit")}},mounted(){this.getCarts()}},T=e("div",null,"這是購物車頁面",-1),U=e("div",{class:"text-end"},[e("button",{class:"btn btn-outline-danger",type:"button"},"清空購物車")],-1),q={class:"table align-middle"},w=e("thead",null,[e("tr",null,[e("th"),e("th",null,"品名"),e("th",{style:{width:"150px"}},"數量/單位"),e("th",null,"單價")])],-1),D=["onClick","disabled"],R={key:0,class:"fas fa-spinner fa-pulse"},B={class:"input-group input-group-sm"},L=["onUpdate:modelValue","onChange","disabled"],N=["value"],A={class:"text-end"},P=e("td",{colspan:"3",class:"text-end"},"總計",-1),j={class:"text-end"},F=e("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),H={class:"text-end text-success"},M={class:"my-5 row justify-content-center"},O={class:"mb-3"},z=e("label",{for:"email",class:"form-label"},"Email",-1),X={class:"mb-3"},G=e("label",{for:"name",class:"form-label"},"收件人姓名",-1),J={class:"mb-3"},K=e("label",{for:"tel",class:"form-label"},"收件人電話",-1),Q={class:"mb-3"},W=e("label",{for:"address",class:"form-label"},"收件人地址",-1),Y=e("div",{class:"mb-3"},[e("label",{for:"message",class:"form-label"},"留言"),e("textarea",{id:"message",class:"form-control",cols:"30",rows:"10",placeholder:"如有特殊需求，請留言並來電通知"})],-1),Z=e("div",{class:"text-end"},[e("button",{type:"submit",class:"btn btn-danger"},"送出訂單")],-1);function $(a,o,v,ee,t,_){const c=p("v-field"),u=p("error-message"),x=p("v-form");return d(),i(h,null,[T,U,e("table",q,[w,e("tbody",null,[t.cart.carts?(d(!0),i(h,{key:0},g(t.cart.carts,s=>(d(),i("tr",{key:s.id},[e("td",null,[e("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:l=>_.deleteCartItem(s),disabled:s.id===t.loadingItem},[s.id===t.loadingItem?(d(),i("i",R)):V("",!0),C(" x ")],8,D)]),e("td",null,r(s.product.title)+" ",1),e("td",null,[e("div",B,[k(e("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":l=>s.qty=l,onChange:l=>_.updateCartItem(s),disabled:s.id===t.loadingItem},[(d(),i(h,null,g(5,l=>e("option",{value:l,key:`${l}+1235`},r(l),9,N)),64))],40,L),[[E,s.qty]])])]),e("td",A,r(s.total),1)]))),128)):V("",!0)]),e("tfoot",null,[e("tr",null,[P,e("td",j,r(t.cart.total),1)]),e("tr",null,[F,e("td",H,r(t.cart.final_total),1)])])]),e("div",M,[n(x,{ref:"form",class:"col-md-6",onSubmit:_.onSubmit},{default:I(({errors:s})=>[e("div",O,[z,n(c,{id:"email",name:"email",type:"email",class:m(["form-control",{"is-invalid":s.email}]),placeholder:"請輸入 Email",rules:"required",modelValue:t.user.email,"onUpdate:modelValue":o[0]||(o[0]=l=>t.user.email=l)},null,8,["class","modelValue"]),n(u,{name:"email",class:"invalid-feedback"})]),e("div",X,[G,n(c,{id:"name",name:"姓名",type:"text",class:m(["form-control",{"is-invalid":s.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:t.user.name,"onUpdate:modelValue":o[1]||(o[1]=l=>t.user.name=l)},null,8,["class","modelValue"]),n(u,{name:"姓名",class:"invalid-feedback"})]),e("div",J,[K,n(c,{id:"tel",name:"電話",type:"text",class:m(["form-control",{"is-invalid":s.電話}]),placeholder:"請輸入電話",rules:"required|min:8|max:10",modelValue:t.user.tel,"onUpdate:modelValue":o[2]||(o[2]=l=>t.user.tel=l)},null,8,["class","modelValue"]),n(u,{name:"tel",class:"invalid-feedback"})]),e("div",Q,[W,n(c,{id:"address",name:"地址",type:"text",class:m(["form-control",{"is-invalid":s.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:t.user.address,"onUpdate:modelValue":o[3]||(o[3]=l=>t.user.address=l)},null,8,["class","modelValue"]),n(u,{name:"地址",class:"invalid-feedback"})]),Y,Z]),_:1},8,["onSubmit"])])],64)}const se=y(S,[["render",$]]);export{se as default};
